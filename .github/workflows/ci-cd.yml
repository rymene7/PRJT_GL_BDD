# .github/workflows/ci-cd-pipeline.yml

name: CI/CD Pipeline

# âœ… DÃ©clencheur : Lorsqu'un code est poussÃ© ou qu'une Pull Request est crÃ©Ã©e
on:
  push:
    branches:
      - main  # Lorsqu'on pousse du code sur la branche principale
  pull_request:
    branches:
      - main  # Lorsqu'une PR est crÃ©Ã©e vers la branche principale

# âœ… Liste des jobs (tÃ¢ches)
jobs:

  lint:
    name: ğŸ§¹ Validation du Code (Lint)
    runs-on: ubuntu-latest  # Environnement Linux pour exÃ©cuter les commandes

    steps:
      - name: ğŸ“¥ RÃ©cupÃ©ration du Code
        uses: actions/checkout@v4

      - name: ğŸ“¦ Installation des DÃ©pendances
        run: npm install

      - name: ğŸ” VÃ©rification du Code avec ESLint
        run: npm run lint

  build:
    name: ğŸ› ï¸ Construction du Projet
    runs-on: ubuntu-latest
    needs: lint  # Ce job s'exÃ©cute uniquement si le job 'lint' rÃ©ussit

    steps:
      - name: ğŸ“¥ RÃ©cupÃ©ration du Code
        uses: actions/checkout@v4

      - name: ğŸ“¦ Installation des DÃ©pendances
        run: npm install

      - name: ğŸ› ï¸ Construction de l'Application
        run: npm run build

  deploy:
    name: ğŸš€ DÃ©ploiement
    runs-on: ubuntu-latest
    needs: build  # Ce job s'exÃ©cute uniquement si le job 'build' rÃ©ussit
    if: github.ref == 'refs/heads/main'  # Ne se dÃ©ploie que sur la branche principale

    steps:
      - name: ğŸ“¥ RÃ©cupÃ©ration du Code
        uses: actions/checkout@v4

      - name: ğŸ“¦ Installation des DÃ©pendances
        run: npm install

      - name: ğŸ› ï¸ Construction de l'Application
        run: npm run build

      - name: ğŸš€ DÃ©ploiement sur Serveur
        run: |
          echo "DÃ©ploiement en cours..."
          # Exemple de commande pour dÃ©ployer :
          # scp -r ./dist user@serveur:/chemin/vers/projet
